"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8189],{11969:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"project/2024/ana_alexia.alecu/index","title":"Pitch Detector","description":"An external musical note detector.","source":"@site/versioned_docs/version-fils_en/project/2024/ana_alexia.alecu/index.md","sourceDirName":"project/2024/ana_alexia.alecu","slug":"/project/2024/ana_alexia.alecu/","permalink":"/docs/fils_en/project/2024/ana_alexia.alecu/","draft":false,"unlisted":false,"editUrl":"https://github.com/UPB-PMRust/upb-pmrust.github.io/edit/main/website/versioned_docs/version-fils_en/project/2024/ana_alexia.alecu/index.md","tags":[],"version":"fils_en","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Tower Crane","permalink":"/docs/fils_en/project/2024/ana.teodorescu2203/"},"next":{"title":"GreenGuardian","permalink":"/docs/fils_en/project/2024/ana_maria.adascalitei/"}}');var r=i(74848),n=i(28453);const o={},a="Pitch Detector",c={},d=[{value:"Description",id:"description",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Log",id:"log",level:2},{value:"Week 6 - 12 May",id:"week-6---12-may",level:3},{value:"Week 7 - 19 May",id:"week-7---19-may",level:3},{value:"Week 20 - 26 May",id:"week-20---26-may",level:3},{value:"Hardware",id:"hardware",level:2},{value:"Schematics",id:"schematics",level:3},{value:"Bill of Materials",id:"bill-of-materials",level:3},{value:"Software",id:"software",level:2},{value:"Links",id:"links",level:2}];function h(e){const t={a:"a",admonition:"admonition",br:"br",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"pitch-detector",children:"Pitch Detector"})}),"\n",(0,r.jsx)(t.p,{children:"An external musical note detector."}),"\n",(0,r.jsxs)(t.admonition,{type:"info",children:[(0,r.jsx)(t.mdxAdmonitionTitle,{}),(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Author"}),": Ana-Alexia Alecu ",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.strong,{children:"GitHub Project Link"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/UPB-FILS-MA/project-aleqbee",children:"https://github.com/UPB-FILS-MA/project-aleqbee"})]})]}),"\n",(0,r.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(t.p,{children:"This Raspberry Pi Pico project is designed to showcase the estimated frequency and corresponding musical note produced by an electronic keyboard or piano app. In this setup, I use the digital output of the Ky-038 microphone sound sensor module, transmitting it to one of the Raspberry Pi Pico's input pins. The process involves applying auto-correlation, weight calculations and tuning algorithms to identify the fundamental frequency using the initial three periods. This determined fundamental frequency is then compared against frequencies in octaves 3, 4 and 5 to detect the nearest pitch frequency. Finally, the identified musical note corresponding to the closest frequency is displayed on the LCD screen."}),"\n",(0,r.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,r.jsx)(t.p,{children:"I saw this project as an opportunity to combine my two passions: music and technology. As a logical person, who finds Maths to be one of her favourite subjects, I knew that this kind of technical pursuit would allow me to use mathematics and physics. I quite enjoy signals and data processing, so alongside music, which is one of my hobbies, it seemed like it would make a perfect project for me. What is more, I have always been amazed by the vocal range finder applications, how they so accurately perceive and display the exact note you are singing, in a very fast manner and I would say this has been my main inspiration, which came to light when I was scrolling through the list of projects done in the previous years."}),"\n",(0,r.jsx)(t.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(t.p,{children:"The architecture components are the following:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Raspberry Pi Pico WH:"})," The Raspberry Pi Pico acts as the main microcontroller board for the project. It runs the Rust program that interfaces with the peripherals and handles the pitch detection algorithm."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Microphone Sound Sensor:"})," The microphone sound sensor captures audio input (sound) from the environment, in my case, from the speakers."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Speakers:"})," The speakers output audio signals, such as generated piano notes corresponding to the detected pitch, from a piano app."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Piano app:"})," It is an application used for playing some musical notes from given octave ranges to be registered by the speakers."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"LCD:"})," Connected to the Raspberry Pi Pico via I2C, the LCD1602 provides an interface for displaying the musical note detected, as well as the corresponding frquency."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Schematic",src:i(13822).A+"",width:"2450",height:"1225"})}),"\n",(0,r.jsx)(t.h2,{id:"log",children:"Log"}),"\n",(0,r.jsx)(t.h3,{id:"week-6---12-may",children:"Week 6 - 12 May"}),"\n",(0,r.jsx)(t.p,{children:"I started implementing the ideas of the project, starting with the hardware. The actual hardware build took me one day. I got started on writing the software as well, by testing different microphone modules and deciding which type of signal output should I use: the analog or digital output (AO or DO) and setting up the LCD. I had spent a lot of time searching for signal processing crates that could make my life easier, but none were no_std, so I let go of the idea and stuck to implementing lots of mathematics."}),"\n",(0,r.jsx)(t.h3,{id:"week-7---19-may",children:"Week 7 - 19 May"}),"\n",(0,r.jsx)(t.p,{children:"This week was the hardest, as I was battling choosing the most facile and efficient algorithm for signal processing and beetween Fast Fourier Transform and Autocorellation, I had chosen the latter. Why? Because it allowed me to remove the DC component (the baseline noise) of a signal and retreive its periodicty, which made my computations easier in order to detect the fundamental frequency of the signal."}),"\n",(0,r.jsx)(t.h3,{id:"week-20---26-may",children:"Week 20 - 26 May"}),"\n",(0,r.jsx)(t.p,{children:"During the previous week I had encountered many errors, most of which were related to data type miscorrelations, and this week I tackled these issues. Here, Rust was not merciful on me, but with patience I had managed to surpass these problems. Additionally, most intensive testing was done during this last week before the PM Fair Presentation, as I was trying to make the pitch detection as accurate as possible, but in the end it did not turn out quite as expected. This is due to the the fact that audio signals can have harmonic components (multiples of the fundamental frequency) and these harmonics can introduce secondary peaks in the autocorrelation function, leading to ambiguity in identifying the correct fundamental frequency. However, when I played the note C via a piano app on my phone, for example, the pitch detector displayed the note D, which is right next to C. So, even though it is not very accurate, it is pretty close."}),"\n",(0,r.jsx)(t.h2,{id:"hardware",children:"Hardware"}),"\n",(0,r.jsx)(t.p,{children:"The Raspberry Pi Pico microcontroller is perfect for this Pitch Detection project, as it requires a lot of computational power due to the signal processing. The Ky-038 microphone sound sensor module is used for capturing the sounds, emitted by a Piano App, through some PC Speakers. Although the hardware part of this project is not complex, as this technological endeavour does not rely on the hardware part, but rather on the software one, I believe it is still a challenging programming project that will help me develop my technical skills needed for my carrer."}),"\n",(0,r.jsxs)(t.p,{children:["The whole setup\n",(0,r.jsx)(t.img,{alt:"Pic3",src:i(29374).A+"",width:"4032",height:"3024"})]}),"\n",(0,r.jsxs)(t.p,{children:["The LCD 1602 I2C Module\n",(0,r.jsx)(t.img,{alt:"Pic1",src:i(86212).A+"",width:"4032",height:"3024"})]}),"\n",(0,r.jsxs)(t.p,{children:["The Ky-038 Sound Sensor Module\n",(0,r.jsx)(t.img,{alt:"Pic2",src:i(133).A+"",width:"4032",height:"3024"})]}),"\n",(0,r.jsx)(t.h3,{id:"schematics",children:"Schematics"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{alt:"KiCAD Schematic1",src:i(72739).A+"",width:"1904",height:"1348"}),"\n",(0,r.jsx)(t.img,{alt:"KiCAD Schematic2",src:i(60015).A+"",width:"1556",height:"756"})]}),"\n",(0,r.jsx)(t.h3,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Device"}),(0,r.jsx)(t.th,{children:"Usage"}),(0,r.jsx)(t.th,{children:"Price"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.raspberrypi.com/documentation/microcontrollers/raspberry-pi-pico.html",children:"Raspberry Pi Pico WH"})}),(0,r.jsx)(t.td,{children:"The microcontroller - used for its processing power"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://ardushop.ro/ro/home/2819-raspberry-pi-pico-wh.html?search_query=raspberry+pi+pico&results=985",children:"57 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.orientdisplay.com/wp-content/uploads/2019/10/AMC1602AR-B-B6WTDW-I2C-specsheet.pdf",children:"1602 LCD with I2C Interface"})}),(0,r.jsx)(t.td,{children:"Used for displaying the musical notes or pitches"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/en/lcds/2894-1602-lcd-with-i2c-interface-and-blue-backlight.html",children:"17 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://kirig.ph/wp-content/uploads/2020/08/KY-038-Joy-IT.pdf",children:"Ky-038 Microphone Sound Sensor"})}),(0,r.jsx)(t.td,{children:"Used for capturing the sound"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.bitmi.ro/modul-senzor-sunet-cu-microfon-ky-038-10658.html?gad_source=1&gclid=Cj0KCQjwltKxBhDMARIsAG8KnqVtOHJJyAnCysmzd026bh0o0Vw4qvzYcy5RNVwreSkt491DiR8epWsaAgojEALw_wcB",children:"6 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.plusivo.com/electronics-kit/88-plusivo-microcontroller-super-starter-kit-196-pcs.html",children:"Kit Plusivo Microcontroller"})}),(0,r.jsx)(t.td,{children:"The breadboard, jumper wires and male to female wires)"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://www.optimusdigital.ro/ro/kituri/12333-kit-plusivo-microcontroller-starter.html?search_query=plusivo+microcontroller+starter+kit&results=3",children:"75 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://components101.com/modules/5v-mb102-breadboard-power-supply-module",children:"MB102 Breadboard Power Supply Module 3.3V/5V"})}),(0,r.jsx)(t.td,{children:"The power supply"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://ardushop.ro/ro/home/40-modul-sursa-de-alimentare-5v-33v.html?gad_source=1&gclid=CjwKCAjw_LOwBhBFEiwAmSEQASEyvWtmmps6Ws3dCUTS4OcWVfv0u_nU3wKQxYoxGqLemFYc_rMQPxoCBSYQAvD_BwE",children:"5 RON"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"PC Speakers"}),(0,r.jsx)(t.td,{children:"Used for emitting a powerful sound"}),(0,r.jsx)(t.td,{children:"[-]"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"software",children:"Software"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Library"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Usage"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://github.com/embassy-rs/embassy",children:"embassy-rs"})}),(0,r.jsx)(t.td,{children:"Rust framework for embedded programming"}),(0,r.jsx)(t.td,{children:"Used for programming the behavior of the Raspberry Pi Pico and for streamlining specific concepts within embedded programming"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://docs.embassy.dev/embassy-executor/git/std/index.html",children:"embassy-executor"})}),(0,r.jsx)(t.td,{children:"Asynchronous executor for Rust embedded systems"}),(0,r.jsx)(t.td,{children:"Used for task scheduling and asynchronous programming"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://embassy.dev/book/dev/time_keeping.html",children:"embassy-time"})}),(0,r.jsx)(t.td,{children:"Time management library"}),(0,r.jsx)(t.td,{children:"Used for time-based operations such as delays"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://docs.embassy.dev/embassy-rp/git/rp2040/index.html",children:"embassy-rp"})}),(0,r.jsx)(t.td,{children:"Peripheral access library"}),(0,r.jsx)(t.td,{children:"Used for initializing and interacting with peripherals"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://github.com/mjhouse/ag-lcd",children:"ag-lcd"})}),(0,r.jsx)(t.td,{children:"Rust port of the LiquidCrystal library"}),(0,r.jsx)(t.td,{children:"Used for writing to the lcd1602"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"links",children:"Links"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.youtube.com/watch?v=2n_JiXvBwsw",children:"My Weekend Project: Musical Note Detector Using An Arduino"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.youtube.com/watch?v=qK2P7_a0Xzo&list=WL&index=7",children:"Voice Detection with Raspberry Pi Pico W"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://ocw.cs.pub.ro/courses/pm/prj2023",children:"PM Projects 2023"})}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://singingcarrots.com/range-test",children:"Vocal Range Finder Tool"}),"\n..."]}),"\n"]})]})}function l(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},60015:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/Ky-038_Sound_Sensor-393cad003230f781379607e8cbdf22c4.png"},72739:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/Pitch_Detector_Setup-fa8b40bd80178982fe3127577e8d88a4.png"},13822:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/Schematic-2437b0f27c18af8c50f8c4199d0fb1ec.png"},86212:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/pic1-802f1e3ce5af43b4bd535b88e83069df.jpeg"},133:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/pic2-7ae433e691b8d18abbb5a859031f0904.jpeg"},29374:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/pic3-0ffe16a2b1a79193addee90c314209cf.jpeg"},28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>a});var s=i(96540);const r={},n=s.createContext(r);function o(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);